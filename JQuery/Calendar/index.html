<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1"
        crossorigin="anonymous">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1"
        crossorigin="anonymous">
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-vBak6HuCC2ua_lRrpo8uA6NnaSICqC4" type="text/javascript"></script>
    <style>
        body {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif
        }

        button:hover {
            color: #ee7d8e !important
        }

        .badge-sm {
            font-size: 10px;
        }

        .list-sm {
            font-size: 12px;
        }

        .model-top-button {
            font-size: 20px;
            background-color: #FFFFFF;
            font-weight: bold;
            border-style: none;
        }

        .modal[type="Delete"] {
            width: 220px;
            margin-left: 43%;
            margin-top: 25%;
        }

        .mapstyle {
            height: 250px;
            border: 1px solid #000000;
        }

        .mapstyle2 {
            width: 150px;
            height: 250px;
            border: 1px solid #000000;
        }
    </style>
</head>

<body>
    <div class="container-fluid text-center">
        <div class="row mt-3">
            <div class="col-2 pl-5">
                <select class="form-control" id="yearlist" style="color:#ee7d8e;font-size:20px;border-style:none;" onchange=ChangeData()>

                </select>
            </div>
            <div class="col-3 pl-5 pr-4">
                <select class="form-control" id="monthlist" style="color:#e98b99;font-size:20px; border-style:none;" onchange=ChangeData()>

                </select>
            </div>
            <div class="col-1">
                <select class="form-control" id="datelist" style="color:#f0a0ac;font-size:20px; border-style:none;" onchange=ChangeData()>

                </select>
            </div>
            <div class="col text-right">
                <button type="button" class="btn" style="font-size:20px;background:white" data-toggle="modal" data-target="#ChooseMode">
                    <i class="fas fa-plus" style=" color: #ee687b;"></i>
                </button>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-1">
                <button id="left" type="button" class="btn" style="background-color:white">
                    <i style="color:#ee687b;" class="fas fa-angle-left fa-3x"></i>
                </button>
            </div>
            <div class="col" style="color:#ee687b; font-size:30px;">
                <b>
                    <span id="year" style="font-size:30px;"></span>
                </b>
                /
                <b>
                    <span id="month" style="font-size:30px;" class="ml-2 mr-2"></span>
                </b>
                /
                <span id="date" style="font-size:30px;"></span>
            </div>
            <div class="col-1">
                <button id="right" type="button" class="btn" style="background-color:white">
                    <i style="color:#ee687b;" class="fas fa-angle-right fa-3x"></i>
                </button>
            </div>
        </div>
        <div class="row mt-5" style="color:#ee687b ; font-weight:bolder; font-size:30px;">
            <div class="col">
                MON
            </div>
            <div class="col">
                TUE
            </div>
            <div class="col">
                WED
            </div>
            <div class="col">
                THU
            </div>
            <div class="col">
                FRI
            </div>
            <div class="col">
                SAT
            </div>
            <div class="col">
                SUN
            </div>
        </div>
        <div id="list" class="mt-3">
        </div>
        <div class="mt-3">
            <div class="row">
                <div class="col" type="d">
                    <button class="btn" style="background-color:white">

                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade bd-example-modal-sm" id="ChooseMode" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col">
                        <button class="model-top-button" data-dismiss="modal" aria-label="Close" style="color:#FF0000">
                            <b>取消</b>
                        </button>
                    </div>
                    <div class="col text-center">
                        <h5 class="modal-title" style="font-weight:bold">新增行程</h5>
                    </div>
                    <div class="col text-right">
                        <button class="model-top-button" class="btn" style="background-color:#FFFFFF" onclick="Createschedule()">
                            新增
                        </button>
                    </div>
                </div>
                <div class="modal-body  ml-3 mr-3">
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <input type="text" class="form-control" id="input_something" aria-describedby="helpId" placeholder="標題">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="row mt-1">
                                <div class="col">
                                    <span>
                                        <b> 行程日期</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="date" class="form-control" name="" id="inpute_Date" style="border-style:none">
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col">
                                    <span>
                                        <b>顏色</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="color" class="form-control" id="input_color" style="border-style:none" style="height:35px;">
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col mt-2">
                                    <span>
                                        <b>開始時間</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="time" class="form-control" id="input_fromHr" style="border-style:none">
                                </div>
                            </div>
                            <div class="row mt-1">
                                <div class="col mt-2">
                                    <span>
                                        <b>結束時間</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="time" class="form-control" id="input_toHr" style="border-style:none">

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group mb-3">
                                <input type="text" id="input_address" class="form-control" placeholder="輸入地址" aria-label="輸入地址" aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="search_latlng">＋</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mapstyle" id="input_map">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade bd-example-modal-sm" id="deleteM" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col">
                        <button class="model-top-button" data-dismiss="modal" aria-label="Close" style="color:rgb(177, 177, 177)">
                            <b>取消</b>
                        </button>
                    </div>
                    <div class="col text-center">
                        <h5 class="modal-title" style="font-weight:bold" id="D_title"></h5>
                    </div>
                    <div class="col text-right">
                        <button class="model-top-button" class="btn" style="background-color:#FFFFFF" onclick="Modifychedule()">
                            修改
                        </button>
                    </div>
                </div>
                <div class="modal-body  ml-3 mr-3">
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <input type="text" class="form-control" id="D_something" aria-describedby="helpId" placeholder="標題">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="row">
                                <div class="col" style="font-size:15.5px; padding-top:8px">
                                    <span>
                                        <b> 行程日期</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="date" class="form-control" name="" id="D_chooseDate" style="border-style:none">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col" style="font-size:15.5px; padding-top:8px">
                                    <span>
                                        <b>顏色</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="color" class="form-control" name="" id="D_color" style="height:35px; border-style:none">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col" style="font-size:15.5px; padding-top:8px">
                                    <span>
                                        <b>起始時間</b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="time" class="form-control" id="D_fromHr" style="border-style:none">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col" style="font-size:15.5px; padding-top:8px">
                                    <span>
                                        <b> 結束時間
                                        </b>
                                    </span>
                                </div>
                                <div class="col">
                                    <input type="time" class="form-control" id="D_toHr" style="border-style:none">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="input-group mb-3">
                                <input type="text" id="D_address" class="form-control" placeholder="輸入地址" aria-label="輸入地址" aria-describedby="basic-addon2">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" id="D_search_latlng">＋</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mapstyle2" id="D_map">

                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal" id="CheckDelete">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Button trigger modal -->

    <!-- Modal -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script>
        var d, f, start;
        var month = new Array(12);
        //      localStorage.clear();
        month[0] = "January"
        month[1] = "February"
        month[2] = "March"
        month[3] = "April"
        month[4] = "May"
        month[5] = "June"
        month[6] = "July"
        month[7] = "August"
        month[8] = "September"
        month[9] = "October"
        month[10] = "November"
        month[11] = "December"
        document.getElementById('search_latlng').onclick = function () {
            marker = null;
            address = document.getElementById('input_address').value;
            geocoder.geocode({
                'address': document.getElementById('input_address').value
            }, function (results, status) {
                if (status === 'OK') {
                    console.log();
                    marker = new google.maps.Marker({
                        position: results[0]['geometry']['location'],
                        map: map
                    });
                }
            });
            searchCheck = true;
        };
        document.getElementById('search_latlng').onclick = function () {
            marker = null;
            address = document.getElementById('input_address').value;
            geocoder.geocode({
                'address': document.getElementById('input_address').value
            }, function (results, status) {
                if (status === 'OK') {
                    console.log();
                    marker = new google.maps.Marker({
                        position: results[0]['geometry']['location'],
                        map: map
                    });
                }
            });
            searchCheck = true;
        };
        function Modifychedule() {
            console.log(document.getElementById("D_chooseDate").value);
            var D_date = document.getElementById("D_chooseDate").value.split('-');
            var YearItem = {
                year: D_date[0],
                month: D_date[1],
                item: []
            };
            var Nowitem = {
                day: D_date[2],
                fromHr: document.getElementById("D_fromHr").value,
                toHr: document.getElementById("D_toHr").value,
                color: " " + document.getElementById("D_color").value + " ",
                something: document.getElementById("D_something").value,
                position: marker2.position,
                address: address
            };
            var storage = JSON.parse(localStorage.getItem(DeleteKey));
            for (var i in storage.item) {
                if (storage.item[i].day == needDelDate && storage.item[i].fromHr == needDelTime[0] && storage.item[i].toHr == needDelTime[1] && storage.item[i].something == needDelValue[1]) {
                    storage.item.splice(i, 1);
                    if (storage.year == D_date[0] && storage.month == D_date[1]) {
                        storage.item.push(Nowitem);
                        localStorage.setItem(DeleteKey, JSON.stringify(storage));
                        console.log("沒改變月份");
                    }
                    else {
                        YearItem.item.push(Nowitem);
                        localStorage.setItem(D_date[0] + D_date[1], JSON.stringify(YearItem));
                        console.log("有改變月份");
                    }
                    break;
                }
            }
            f = new Date(d.getFullYear(), d.getMonth(), 1);
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            CreateList();
        }
        function Createschedule() {
            var date = document.getElementById("inpute_Date").value.split('-');
            console.log(date);
            var YearItem = {
                year: date[0],
                month: date[1],
                item: []
            };
            var Nowitem = {
                day: date[2],
                fromHr: document.getElementById("input_fromHr").value.toString(),
                toHr: document.getElementById("input_toHr").value.toString(),
                color: " " + document.getElementById("input_color").value + " ",
                something: document.getElementById("input_something").value,
                position: marker.position,
                address: address
            };
            console.log(address)
            if (localStorage.getItem(date[0] + date[1]) == null) {
                YearItem.item.push(Nowitem);
                localStorage.setItem(date[0] + date[1], JSON.stringify(YearItem));
            } else {
                var tmp = JSON.parse(localStorage.getItem(date[0] + date[1]));
                tmp.item.push(Nowitem);
                localStorage.setItem(date[0] + date[1], JSON.stringify(tmp));
            }
            f = new Date(d.getFullYear(), d.getMonth(), 1)
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            CreateList();
        }

        function ChangeData() {
            var _y = document.getElementById("yearlist").value;
            var _m = document.getElementById("monthlist").value;
            var _d = document.getElementById("datelist").value;
            d = new Date(_y, _m, _d);
            f = new Date(d.getFullYear(), d.getMonth(), 1)
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            console.log(d.getFullYear() + " " + d.getMonth() + " " + d.getDate() + "??");
            CreateDate();
            CreateList();
        }

        function CreateYear() {
            for (var i = 1950; i < 2040; i++) {
                var item = document.createElement("option"); // 問題
                if (i == d.getFullYear()) {
                    item.selected = true;
                }
                item.innerText = i;
                item.value = i;
                item.style = "color:#ee7d8e";
                document.getElementById("yearlist").appendChild(item);
            }
        }
        function CreateMonth() {
            for (var i = 0; i < month.length; i++) {
                var item = document.createElement("option");
                if (i == d.getMonth()) {
                    item.selected = true;
                }
                item.innerText = month[i];
                item.value = i;
                item.style = "color:#ee7d8e";
                document.getElementById("monthlist").appendChild(item);
            }
        }
        function CreateDate() {
            document.getElementById("datelist").innerHTML = "";
            var year = document.getElementById("yearlist").value;
            var month = document.getElementById("monthlist").value;
            var tmp = new Date(year, (parseInt(month) + 1), 0).getDate();
            for (var i = 1; i <= tmp; i++) {
                var item = document.createElement("option");
                if (i == d.getDate()) {
                    item.selected = true;
                }
                item.innerText = i;
                item.value = i;
                item.style = "color:#ee7d8e";
                document.getElementById("datelist").appendChild(item);
            }
        }
        var geocoder;
        var address;
        var map
        var map2
        var marker
        var marker2
        window.onload = function () {
            d = new Date();
            f = new Date(d.getFullYear(), d.getMonth(), 1)
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            console.log(d.getFullYear() + " " + d.getMonth() + " " + d.getDate() + "??");
            CreateYear();
            CreateMonth();
            CreateDate();
            CreateList();
            map = new google.maps.Map(document.getElementById('input_map'), {
                zoom: 8,
                center: {
                    lat: 24.806455,
                    lng: 120.644
                }
            });
            map2 = new google.maps.Map(document.getElementById('D_map'), {
                zoom: 8,
                center: {
                    lat: 24.806455,
                    lng: 120.644
                }
            });
            geocoder = new google.maps.Geocoder();
            map.addListener('click', function (e) {
                map.setCenter(e.latLng);
                if (marker != null) {
                    marker.setMap(null);
                    marker = null;
                }
                marker = new google.maps.Marker({
                    position: e.latLng,
                    map: map,
                    title: e.latLng.toString()
                });
                geocoder.geocode({ 'latLng': e.latLng }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        // 如果有資料就會回傳
                        if (results) {
                            address = results[0].formatted_address;
                            document.getElementById('input_address').value = address;
                        }
                    }
                    // 經緯度資訊錯誤
                    else {
                        alert("Reverse Geocoding failed because: " + status);
                    }
                });
            });
            map2.addListener('click', function (e) {
                map2.setCenter(e.latLng);
                if (marker2 != null) {
                    marker2.setMap(null);
                    marker2 = null;
                }
                marker2 = new google.maps.Marker({
                    position: e.latLng,
                    map: map2,
                    title: e.latLng.toString()
                });
                geocoder.geocode({ 'latLng': e.latLng }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        // 如果有資料就會回傳
                        if (results) {
                            address = results[0].formatted_address;
                            document.getElementById('D_address').value = address;
                        }
                    }
                    // 經緯度資訊錯誤
                    else {
                        alert("Reverse Geocoding failed because: " + status);
                    }
                });
            });
        }

        var DeleteKey;
        var needDelValue;
        var needDelTime;
        var needDelDate;

        document.getElementById("CheckDelete").onclick = function () {
            var storage = JSON.parse(localStorage.getItem(DeleteKey));
            for (var i in storage.item) {
                if (storage.item[i].day == needDelDate && storage.item[i].fromHr == needDelTime[0] && storage.item[i].toHr == needDelTime[1] && storage.item[i].something == needDelValue[1]) {
                    storage.item.splice(i, 1);
                    break;
                }
            }
            localStorage.setItem(DeleteKey, JSON.stringify(storage));
            f = new Date(d.getFullYear(), d.getMonth(), 1);
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            CreateList();
        }
        function GetItem(year, month, day) {
            var listItemul = document.createElement("ul");
            var itemli = document.createElement("li");
            var itemSp = document.createElement("span");
            var listButton = document.createElement("button");
            listItemul.className = "list-group text-left list-group mb-3";
            listItemul.style = "height:100px;"
            itemli.className = "list-group-item list-sm";
            itemli.style = "padding:5px;margin:5px ;color:black; border-style:none;margin:2px; 5px;";
            itemSp.className = "badge-light badge-pill badge-sm mr-2";
            listButton.className = "btn btn-block pr-0 pt-0 pl-0 pb-0 text-left";
            listButton.formTarget = "#deleteM";
            var tmp_yearmonth = year.toString();
            if (month < 10)
                tmp_yearmonth += "0" + (month + 1).toString();
            else
                tmp_yearmonth += (month + 1).toString();
            if (localStorage.getItem(tmp_yearmonth) != null) {
                var retrievedObject = JSON.parse(localStorage[tmp_yearmonth]).item;
                for (var i in retrievedObject) {
                    if (retrievedObject[i].day == day) {
                        itemli.style = "background-color:" + retrievedObject[i].color + ";border-style:none";
                        console.log(retrievedObject[i].color)
                        itemSp.innerHTML = "<i>" + retrievedObject[i].fromHr.toString() + "-" + retrievedObject[
                            i].toHr
                            .toString() + "</i>"
                        itemli.appendChild(itemSp);
                        itemli.innerHTML += "</br>" + retrievedObject[i].something.toString();
                        listButton.appendChild(itemli);
                        listButton.value = month.toString() + day.toString();
                        listButton.dataset.target = "#deleteM";
                        listButton.dataset.toggle = "modal";
                        listButton.onclick = function () {
                            var tmp_date = this.parentNode.parentNode.innerText.split("\n")[0];
                            if (tmp_date < 10) {
                                needDelDate = "0" + tmp_date;
                            }
                            else {
                                needDelDate = tmp_date;
                            }
                            needDelValue = this.innerText.split("\n");
                            needDelTime = needDelValue[0].split('-');
                            DeleteKey = year.toString();
                            document.getElementById("D_title").innerText = d.getFullYear() + "/0" + (d.getMonth() + 1) + "/" + needDelDate
                            var time = d.getFullYear()
                            if (d.getMonth() < 10) {
                                time += "-0" + (d.getMonth() + 1);
                                DeleteKey += "0" + (d.getMonth() + 1);
                            }
                            else
                                time += "-" + d.getMonth();
                            time += "-" + needDelDate;

                            document.getElementById("D_something").value = needDelValue[1];
                            document.getElementById("D_chooseDate").value = time;
                            document.getElementById("D_fromHr").value = needDelTime[0];
                            document.getElementById("D_toHr").value = needDelTime[1];
                            //        document.getElementById("D_address").value =
                            var D_month
                            if (d.getMonth() < 10) {
                                D_month = 0 + (d.getMonth() + 1).toString();
                            }
                            var Dstore = JSON.parse(localStorage.getItem(d.getFullYear().toString() + D_month));
                            console.log(Dstore);
                            for (var i of Dstore.item) {
                                if (Dstore.year == d.getFullYear() && Dstore.month == D_month &&
                                    i.day == needDelDate && i.fromHr == needDelTime[0] && i.toHr == needDelTime[1] && i.something == needDelValue[1]
                                ) {
                                    document.getElementById('D_address').value = i.address
                                    marker2 = new google.maps.Marker({
                                        position:i.position,
                                        map:map2
                                    });
                                    console.log(i)
                                }
                            }
                        };
                        listItemul.appendChild(listButton);
                        //重置所有元件
                        itemli = document.createElement("li");
                        itemSp = document.createElement("span");
                        listButton = document.createElement("button");
                        itemli.className = "list-group-item list-sm";
                        itemli.style = "padding:5px;margin:5px ;color:black; border-style:none";
                        itemSp.className = "badge-dark badge-pill badge-sm mr-2";
                        listButton.className = "btn btn-block pr-0 pt-0 pl-0 pb-0 text-left";
                    } else {
                        listItemul.appendChild(itemli);
                    }
                }
            } else {
                listItemul.appendChild(itemli);
            }
            return listItemul;
        }
        function CreateList() {
            document.getElementById("list").innerHTML = "";
            for (var j = 0; j < 6; j++) {
                var row = document.createElement("div");
                row.className = "row mt-0 mb-0";
                for (var i = 0; i < 7; i++) {
                    var col = document.createElement("div");
                    var button = document.createElement("button");
                    //                    button.className = "btn btn-block text-right";
                    col.className = "col pt-3 pb-3 text-right";
                    if (d.getMonth() != start.getMonth()) {
                        col.style = "border:#e9e9e9 solid 1px; color:#d0d1d5; background-color:#FFFFFF";
                    } else {
                        col.style = "border:#e9e9e9 solid 1px;background-color:#FFFFFF";
                        if (d.getDate() == start.getDate()) {
                            col.style =
                                "border:#e9e9e9 solid 1px; background-color:#FFFFFF ; color:#ee7d8e ;font-weight:bolder";
                        }
                    }
                    col.innerHTML += start.getDate();
                    col.appendChild(GetItem(start.getFullYear(), start.getMonth(), start.getDate()));
                    //                   col.appendChild(button);
                    start.setDate(start.getDate() + 1);
                    row.appendChild(col);
                }
                document.getElementById("list").appendChild(row);
            }
            document.getElementById("year").innerText = d.getFullYear();
            document.getElementById("month").innerText = month[d.getMonth()];
            document.getElementById("date").innerText = d.getDate();
            var tmp_date = d.getFullYear();
            if (d.getMonth() < 10) {
                tmp_date += "-0" + d.getMonth();
            }
            else {
                tmp_date += "-" + d.getMonth();
            }
            if (d.getDay() < 10) {
                tmp_date += "-0" + d.getDate();
            }
            else {
                tmp_date += "-" + d.getDate();
            }
            console.log(tmp_date);
            document.getElementById("inpute_Date").value = tmp_date;
            document.getElementById("input_fromHr").value = "00:00";
            document.getElementById("input_toHr").value = "00:00";
        };
        document.getElementById("left").onclick = function () {
            d.setMonth(d.getMonth() - 1);
            f = new Date(d.getFullYear(), d.getMonth(), 1);
            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            //          start.setDate(f.getDate() - f.getDay() + 1);
            CreateList();
        };
        document.getElementById("right").onclick = function () {
            d.setMonth(d.getMonth() + 1);
            f = new Date(d.getFullYear(), d.getMonth(), 1);

            start = new Date(d.getFullYear(), d.getMonth());
            start = getStart(start);
            CreateList();
        };

        function getStart(tmp) {
            while (tmp.getDay() != 1) {
                tmp.setDate(tmp.getDate() - 1);
            }
            return tmp;
        };
    </script>
</body>

</html>